<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Quattroshapes by foursquare</title>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-41598430-1', 'quattroshapes.com');
                  ga('send', 'pageview');

                  </script>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Quattroshapes</h1>
        <h2></h2>
        <a href="https://github.com/foursquare/quattroshapes" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">

<h3>
<a name="quattroshapes" class="anchor" href="#quattroshapes"><span class="octicon octicon-link"></span></a>The Global Polygon Gazetteer</h3>

<p><a href="http://foursquare.com">Foursquare</a> needs quality place data to power its geocoding engine to ensure the best recommendations. When someone searches for the best coffee in Brooklyn, a simple venue to place point or venue to place bounding box search can result in venues in Manhattan and Jersey City overwhelming the results for Brooklyn. </p>

<p>To improve recommendations, we have created an authoritative source of polygons around a curated list of places. This gazetteer of non-overlapping polygons provides more relevant results than simple point geometries. </p>

<p><a href="#preview">View preview images Â»</a></p>

<p>This work is based on foursquare checkins, geo tagged photos from <a href="http://flickr.com">Flickr</a>, an extended version of <a href="http://naturalearthdata.com">Natural Earth</a>, and <a href="http://brigade.codeforamerica.org/opendata">open government data</a>. Concordance is provided between quattroshapes, <a href="http://geonames.org">geonames.org</a>, and <a href="http://developer.yahoo.com/geo/geoplanet/">Yahoo! GeoPlanet</a> unique IDs in the gazetteer.</p>

<p>The quattroshapes technique calculates the dominant place ID for a given area based on heterogeneous inputs. This work is an extension of <a href="http://code.flickr.net/2008/10/30/the-shape-of-alpha/">alphashapes</a> and <a href="https://github.com/simplegeo/betashapes">betashapes</a> (thanks <a href="https://github.com/straup">Aaron</a> and <a href="https://github.com/schuyler">Schuyler</a>!) and is used to backfill countries without complete open data.</p>

<p>Geocoding can be the hardest part about going open source - and reverse geocoding is even harder. Reverse geocoding reports the gazetteer place for a latitude and longitude map location or address string and is useful when source data needs to be normalized. This new polygon gazetteer data is used in <a href="https://github.com/foursquare/twofishes">TwoFishes</a>, the coarse splitting geocoder (and reverse geocoder) written in scala from <a href="https://github.com/blackmad/">David Blackman</a> at foursquare.</p>

<p>The quattroshapes code and resulting 30 gb of data are licensed under <a href="http://creativecommons.org/licenses/by/2.0/">CC-BY</a>, but includes data licensed from many governments around the world. Check the <a href="https://github.com/foursquare/quattroshapes/blob/master/LICENSE.md">License file</a> for full details and limitations.</p>

<p>Enjoy!</p>

<hr>

<h3><a name="downloads" class="anchor" href="#downloads"><span class="octicon octicon-link"></span></a>Downloads</h3>

<p>Shapefiles are in WGS84 (geographic) projection and UTF-8 character encoding.</p>
<p>Note that these do not currently have geonames concordances baked in. We'll be posting matched files soon. In the meantime, you can use <a href="https://github.com/blackmad/shputils">shputils</a> to do the matching, following the instructions here: <a href="https://github.com/foursquare/twofishes#reverse-geocoding-and-polygons">https://github.com/foursquare/twofishes#reverse-geocoding-and-polygons</a></p>

<ul>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_adm0.zip">quatroshapes admin 0</a> - 106 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_adm1_region.zip">quatroshapes admin 1 regions</a> - 17 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_adm1.zip">quatroshapes admin 1</a> - 106 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_adm2_region.zip">quatroshapes admin 2 regions</a> - 1.5 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_adm2.zip">quatroshapes admin 2</a> - 304 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_localadmin.zip">quatroshapes local admin</a> - 467 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_localities.zip">quatroshapes localities</a> - 420 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/gn-qs_localities.zip">quatroshapes localities (with geonames concordance)</a> - 420 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/qs_neighborhoods.zip">quatroshapes neighborhoods</a> - 32 mb </li>
</ul>

<p><strong>Goodies</<strong></p>

<p>quatroshapes gazetteer:</p>

<ul>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/quattroshapes_gazetteer_gn_then_gp.zip">prefer GeoNames.org lat-lngs</a> - 154 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/quattroshapes_gazetteer_gp_then_gn.zip">prefer GeoPlanet + Flickr lat-lngs</a> - 154 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/quattroshapes_gazetteer_gn_then_gp_locality.zip">localities only, Geonames.org lat-lngs</a> - 46 mb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/quattroshapes_gazetteer_gn_then_gp_with_content.zip">places with population, checkins, or flickr photos, Geonames.org lat-lngs</a> - 34 mb </li>
</ul>

<p><b>Other</b></p>

<ul>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/ne_adm1.zip">Natural Earth admin-1</a> - 16 mb, version 3.0.0 </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/ne_ussd_adm0.zip">US State Department HIU admin-0</a> - 79 mb, re-coded like Natural Earth </li>
<li>(coming soon) National Mapping Agency Open Data - 7 gb </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/europe_localities.zip">Customized Europe localities</a> - 135 mb, mashed-up EuroGeoGraphics urban data and European Environment Agency <a href="http://www.eea.europa.eu/data-and-maps/data/urban-morphological-zones-2006-umz2006-f3v0">UMZ</a> data. </li>
<li><a href="http://www.nextzen.org.s3.amazonaws.com/downloads/quattroshapes/geoplanet_voronoi.zip">GeoPlanet voronoi diagrams</a> - 198 mb includes adm0, adm1, adm2, localadmin & localities. </li></ul>

<h3><a name="preview" class="anchor" href="#preview"><span class="octicon octicon-link"></span></a>Preview</h3>

<strong>Administrative level 1<strong>

<i>(below) States and provinces in orange; regions shown in red. Mix of national mapping agency and Natural Earth.</i>

<img src="images/qs_adm1.png">

<strong>Administrative level 2</strong>

<i>(below) Counties in bright blue; regions shown in dark blue. National mapping agency data.</i>

<img src="images/qs_adm2.png">

<strong>Local administrative level</strong>

<i>(below) In green. This level of government assumes municipal type control over the central town and surrounding countryside. National mapping agency data.</i>

<img src="images/qs_localadmin.png">

<strong>Localities</strong>

<i>(below) In yellow. In the USA this is the smallest unit of government with legal boundaries. For most other countries the localities here are informal parts of local administrative areas. Mix of national mapping agency, quattroshapes enumeration using foursquare checkins & custom data.</i>

<img src="images/qs_localities.png">

<strong>Administrative level 0</strong>

<i>(below) In gray. Mix of national mapping agency and US State Department data.</i>

<img src="images/qs_adm0.png">

<strong>Neighborhoods</strong>

<i>(below) In purple. Quattroshape enumeration from geo tagged photos in Flickr using GeoPlanet hierarchy.</i>

<img src="images/qs_neighborhoods.png">

<strong>Gazetteer</strong>

<i>(below) In light purple. Over 1 million administrative and populated places with around 800,000 having concordance between GeoNames.org and Yahoo! GeoPlanet WOE unique IDs.</i>

<img src="images/qs_gazetteer.png">


</section>

        <aside id="sidebar">
          <a href="https://github.com/foursquare/quattroshapes/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/foursquare/quattroshapes/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/foursquare/quattroshapes"></a> is maintained by <a href="https://github.com/foursquare">foursquare</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>


  </body>
</html>
